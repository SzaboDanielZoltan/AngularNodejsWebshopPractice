
<div class="jumbotron">
    <div class="row">
        <div class="col-8">
            <h1 class="display-3">{{ (product$ | async)?.title}}</h1>
            <p class="lead">{{ (product$ | async)?.short}}</p>
            <hr class="my-4">
            <p>{{ (product$ | async)?.description}}</p>
            <p class="lead">
                <a class="btn btn-primary btn-lg"
                   href="#"
                   role="button"
                   data-toggle="modal"
                   data-target="#myModal">Buy</a>
            </p>
        </div>
        <div class="col-4">
            <div class="row">
                <img style="height: auto; width: 100%; display: block;"
                 src="{{ (product$ | async)?.pic}}"
                 alt="Card image">
            </div>
            <div class="container-fluid mt-2" style="border: 1px solid #555">
                <div class="row mt-3">
                    <div class="col-5">
                        <p>METACRITIC SCORE:</p>
                    </div>
                    <div class="col-7">
                        <p>{{ (product$ | async)?.metacritic}}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-5">
                        <p>RELEASE DATE:</p>
                    </div>
                    <div class="col-7">
                        <p>{{ (product$ | async)?.release}}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-5">
                        <p>DEVELOPER:</p>
                    </div>
                    <div class="col-7">
                        <p>{{ (product$ | async)?.publisher}}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-5">
                       <p>GENRE:</p>
                    </div>
                    <div class="col-7">
                        <p>{{ (product$ | async)?.type}}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal  mr-5"  id="myModal">
    <div class="modal-dialog modal-lg"
         role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Order Form</h2>
                <button type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form  #userForm="ngForm" novalidate>
            <div class="modal-body  ">
               <div class="modal-text bg-primary">
                    <p >Please fill in your information and we'll be sending your order</p>
                    <p >Your selected item :  {{ (product$ | async)?.title}}</p>
                    <p class="text-warning">Total price: {{ (product$ | async)?.price*(order.quantity)|currency: 'USD'}}</p>
                    
               </div>   <div class="from-group">
                        <label class="bg-primary" for="name">Name *:</label>
                        <input  required #userName="ngModel" class="form-control" type="text"  
                                id="name" [(ngModel)]="order.userName" name="userName"
                                pattern="[A-Za-z- ]{1,50}">
                        <p *ngIf="userName.invalid && userName.touched" class="text-danger">Invalid!</p>
                    </div>
                    <div class="from-group">
                        <label class="bg-primary" for="email">Email *:</label>
                        <input  required #userEmail="ngModel" class="form-control" type="email" 
                                id="email" [(ngModel)]="order.userEmail" 
                                name="userEmail" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
                        <p  *ngIf="userEmail.invalid && userEmail.touched" class="text-danger">Invalid!</p>
                    </div>
                    <div class="form-group">
                        <label class="bg-primary" for="addresss">Shipping Address *:</label>
                        <input  required #userAddress="ngModel" class="form-control"
                                type="text" id="address" [(ngModel)]="order.shippingAddress"
                                name="shippingAddress">
                        <p  *ngIf="userAddress.invalid && userAddress.touched" class="text-danger">Invalid!</p>
                    </div>
                    <div class="form-group">
                        <label class="bg-primary" for="quantity">Quantity</label>
                        <input class="form-control" type="number" min="1" id="quantity" 
                        [(ngModel)]="order.quantity" name="quantity" required #orderQuantity="ngModel"
                        pattern="(?!0)\d*[0-9]*[^.+-]">
                        <p class="text-danger" *ngIf="orderQuantity.invalid ">Invalid</p>
                    </div>
                   
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-info" 
                            [disabled]="!userForm.form.valid"
                            (click)="postNewOrder()"
                            [attr.data-dismiss]="dataModal" 
                             >Purchare
                    </button>
                    <button type="button"
                            class="btn btn-danger"
                            data-dismiss="modal">Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>